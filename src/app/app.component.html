<app-graphics-view class="canvas" [matrices]="matrices$ | async" [selectedIndex]="selectedIndex" />
<div [formGroup]="matrixForm" style="overflow-x: scroll;">
  <div formArrayName="matrixArray" cdkDropList #doneList="cdkDropList" class="equation-list"
    cdkDropListOrientation="horizontal" cdkDropListLockAxis="x" (cdkDropListDropped)="drop($event)">
    <div class="math">x' =</div>
    @for (alias of matrixArray.controls; track alias; let i = $index) {
      @if ($first) {
        <app-add-transformations  [class.hidden]="selectedIndex !== i" (addTransformation)="addTransformation($event,i)"/>
      }
    <div class="matrixContainer" cdkDrag
      [class.selected]="selectedIndex === i" (mousedown)="select(i)">
      <div class="dragHandle example-handle" cdkDragHandle></div>
      <app-matrix [formControlName]="i" />
      <div class="deleteArea" (click)="deleteTransformation(i)">
        <mat-icon class="deleteIcon">delete</mat-icon>
      </div>
    </div>
    <app-add-transformations  [class.hidden]="selectedIndex !== i" (addTransformation)="addTransformation($event,i+1)" />
    }
    <div class="math">* x</div>
  </div>
</div>